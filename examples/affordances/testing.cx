package main

type test struct {
	nums []i32
}

var myTest test

func foo () () {
	myTest.nums = []i32{0, 1, 2, 3}
}

func main () () {
	mask0 := 0
	mask1 := 1
	mask2 := 2
	mask3 := 4
	mask4 := 8
	mask5 := 16

	//masks := []i32{0, 1, 2, 4, 8, 16}
	strings := []str{"one", "two", "three", "four"}

	strct := new test{nums: []i32{0, 1, 2, 3}}

	foo()

	target := ->{pkg(main) fn(main) exp(testi32)}
	objs := ->{obj1 $i32.add(1, 1)}
	[]str.print(objs)

	rules := ->{
		if true {
			search(arrays)
			search(globals)
			search(all) // this would override everything
		}
		if obj1 $2 {
			allow(x == x)
		}
	}

	aff.print(rules)
	[]str.print(rules)
	
	affs := aff.query(target, objs, rules)
	
	aff.print(affs)

// 	str.print("index testing")
// 	i32.print(aff.index(affs, 6))
	
// 	aff.execute(target, affs, 2)
	
testi32:
	i32.print(0)

	[]str.print([]str{"testing"})
}
